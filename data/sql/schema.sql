CREATE TABLE sf_abstract_files (id BIGINT AUTO_INCREMENT, path VARCHAR(255) NOT NULL, filename VARCHAR(255), hash VARCHAR(255) NOT NULL, comment TEXT, sf_filebase_directories_id BIGINT, type VARCHAR(255), level BIGINT, UNIQUE INDEX u1_idx (hash), INDEX sf_filebase_directories_id_idx (sf_filebase_directories_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_filebase_tags (id BIGINT AUTO_INCREMENT, sf_abstract_files_id BIGINT, tag VARCHAR(255) NOT NULL, INDEX i1_idx (tag), INDEX sf_abstract_files_id_idx (sf_abstract_files_id), PRIMARY KEY(id)) ENGINE = INNODB;
ALTER TABLE sf_abstract_files ADD FOREIGN KEY (sf_filebase_directories_id) REFERENCES sf_abstract_files(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE sf_filebase_tags ADD FOREIGN KEY (sf_abstract_files_id) REFERENCES sf_abstract_files(id) ON UPDATE CASCADE ON DELETE CASCADE;
